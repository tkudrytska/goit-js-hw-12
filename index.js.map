{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(inputValue, page, limit) {\n        const searchParams = new URLSearchParams({\n            key: '46126545-8899f9a6fbc888edd135bf332',\n            q: inputValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: limit,\n            page: page,\n        });\n\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n\n        return response.data.hits;\n};","import { gallery } from '../main';\n\nexport function renderImages(images) {\n    const markup = images\n        .map((image) => {\n            const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n            return `\n            <li class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" class=\"gallery-item\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                    <div class=\"image-info\">\n                        <p>Likes: ${likes}</p>\n                        <p>Views: ${views}</p>\n                        <p>Comments: ${comments}</p>\n                        <p>Downloads: ${downloads}</p>\n                    </div>\n                </a>\n            </li>`;\n        })\n        .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n};\n","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.search-form');\nexport const gallery = document.querySelector('.image-gallery');\nconst btn = document.querySelector(`.load-more`);\nconst loader = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('.image-gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nlet page = 1;\nlet limit = 15;\nlet currentQuery = \"\";\nconst totalPages = Math.ceil(500 / limit);\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const inputValue = form.elements.query.value.trim();\n\n    if (!inputValue) {\n        iziToast.show({\n            message: 'Please enter a search query.',\n            color: 'red',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    currentQuery = inputValue;\n    page = 1;\n    gallery.innerHTML = '';\n\n    loadImages();\n});\n\nasync function loadImages() {\n    loader.style.display = 'block';\n    try {\n        const images = await fetchImages(currentQuery, page, limit);\n\n        if (images.length === 0 && page === 1) {\n            iziToast.show({\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                color: 'red',\n                position: 'topRight',\n            });\n            gallery.innerHTML = '';\n            return;\n        }\n\n        renderImages(images);\n\n        lightbox.refresh();\n\n        scroll();\n\n        if (page < totalPages) {\n            btn.style.display = 'block';\n        } else {\n            btn.style.display = 'none';\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: \"red\",\n                position: \"topRight\",\n            });\n        }\n    } catch (error) {\n        iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            color: \"red\",\n            position: \"topRight\",\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nbtn.addEventListener(\"click\", () => {\n    page += 1;\n    loadImages();\n});\n\nfunction scroll() {\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n};"],"names":["fetchImages","inputValue","page","limit","searchParams","axios","renderImages","images","markup","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","gallery","form","btn","loader","lightbox","SimpleLightbox","currentQuery","totalPages","event","iziToast","loadImages","scroll","cardHeight"],"mappings":"owBAEO,eAAeA,EAAYC,EAAYC,EAAMC,EAAO,CACnD,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUE,EACV,KAAMD,CAClB,CAAS,EAID,OAFiB,MAAMG,EAAM,IAAI,4BAA4BD,CAAY,EAAE,GAE3D,KAAK,IAC7B,CCdO,SAASE,EAAaC,EAAQ,CACjC,MAAMC,EAASD,EACV,IAAKE,GAAU,CACZ,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA;AAAA,2BAEQC,CAAa;AAAA,gCACRC,CAAY,UAAUC,CAAI;AAAA;AAAA,oCAEtBC,CAAK;AAAA,oCACLC,CAAK;AAAA,uCACFC,CAAQ;AAAA,wCACPC,CAAS;AAAA;AAAA;AAAA,kBAIjD,CAAS,EACA,KAAK,EAAE,EACZC,EAAQ,mBAAmB,YAAaT,CAAM,CAClD,CCZA,MAAMU,EAAO,SAAS,cAAc,cAAc,EACrCD,EAAU,SAAS,cAAc,gBAAgB,EACxDE,EAAM,SAAS,cAAc,YAAY,EACzCC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,mBAAoB,CAClD,aAAc,MACd,aAAc,GAClB,CAAC,EAEGpB,EAAO,EACPC,EAAQ,GACRoB,EAAe,GACnB,MAAMC,EAAa,KAAK,KAAK,IAAMrB,CAAK,EAExCe,EAAK,iBAAiB,SAAU,MAAOO,GAAU,CAC7CA,EAAM,eAAc,EAEpB,MAAMxB,EAAaiB,EAAK,SAAS,MAAM,MAAM,OAE7C,GAAI,CAACjB,EAAY,CACbyB,EAAS,KAAK,CACV,QAAS,+BACT,MAAO,MACP,SAAU,UACtB,CAAS,EACD,MACH,CAEDH,EAAetB,EACfC,EAAO,EACPe,EAAQ,UAAY,GAEpBU,GACJ,CAAC,EAED,eAAeA,GAAa,CACxBP,EAAO,MAAM,QAAU,QACvB,GAAI,CACA,MAAMb,EAAS,MAAMP,EAAYuB,EAAcrB,EAAMC,CAAK,EAE1D,GAAII,EAAO,SAAW,GAAKL,IAAS,EAAG,CACnCwB,EAAS,KAAK,CACV,QAAS,2EACT,MAAO,MACP,SAAU,UAC1B,CAAa,EACDT,EAAQ,UAAY,GACpB,MACH,CAEDX,EAAaC,CAAM,EAEnBc,EAAS,QAAO,EAEhBO,IAEI1B,EAAOsB,EACPL,EAAI,MAAM,QAAU,SAEpBA,EAAI,MAAM,QAAU,OACpBO,EAAS,KAAK,CACV,QAAS,6DACT,MAAO,MACP,SAAU,UAC1B,CAAa,EAER,MAAe,CACZA,EAAS,KAAK,CACV,QAAS,6DACT,MAAO,MACP,SAAU,UACtB,CAAS,CACT,QAAc,CACNN,EAAO,MAAM,QAAU,MAC1B,CACL,CAEAD,EAAI,iBAAiB,QAAS,IAAM,CAChCjB,GAAQ,EACRyB,GACJ,CAAC,EAED,SAASC,GAAS,CAEd,MAAMC,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}